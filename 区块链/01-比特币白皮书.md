# 比特币白皮书读书笔记

## 01 比特币是什么？

比特币是一种**去中心化的点对点技术实现的电子支付系统**，它使得在线支付能够直接由一方发起并支付给另外一方，中间不需要通过任何的金融机构。

白皮书的摘要说明了比特币的运行原理，如下:

> **摘要**：一个真正的的点对点的电子现金应该允许从发起方直接在线支付给对方，而不需要通过第三方的金融服务机构。现有的数字签名技术虽然提供了部分解决方案，但如果还需要经过一个可以信任的第三方机构来防止电子现金的“双重支付”，那就丧失了电子现金给人类带来的最大好处。我们针对电子现金会出现的“双重支付”问题，用点对点的网络技术提供了一个解决方案。该网络通过给交易记录打上时间戳，并通过哈希对其加密，然后将其并入一个不断增长的哈希记录所组成的链条文件中，以此形成一个新的交易记录，这个哈希记录链条文件（以下简称链条文件）是由一个需要证明工作量的系统网路所提供存储和计算服务的。没有基于工作量证明的系统网络来重新完成所有的工作量证明，一个已经形成的记录是不能被修改的。基于工作量证明的系统理念，最长的链条文件不仅仅是提供这些工作量序列事件记录的证据，而且它也是由最大的CPU处理能力池产生的。只要由计算机节点控制的大部分CPU处理能力不联合攻击网络本身，它们的处理能力将超过攻击者，并生成最大的链条文件。

中本聪抛出的问题，”**一个需要第三方支持的点对点电子现金系统是没有价值的**“，白皮书提供了一个解决方案，且说明了解决这个问题的主要方式和优势。

## 02 关键问题

如何**去中心化**：

    去中心化依靠目前p2p技术已经有比较成熟的解决方案了，因此主要重点在于如何解决双花问题。

如何解决“**双花问题**”：

    1.什么是双花问题？

    如果同一笔钱（数字货币）被重复支付两次，就是双花问题（双重支付）。

    2.传统方式如何解决？

    传统货币黄金、白银无法复制，因此并不存在。纸币有通过防伪码,借助第三方机构进行监督，如果有人制造假币，会有法律进行惩罚。

    3.比特币的解决方案

    要解决“双花问题”则必须记账核对,那么如何在一个没有中心的p2p系统中记账又受到认同呢，比特币引入了基于时间戳的随机散列，并且让其形成前后文相关的序列。

    借助不对称加密算法，通过公钥可以加密数据或验证数据，通过私钥可以解密数据或对数据签名，如此循环往复形成了一个**交易链条（即区块链）**通过公开公钥就可以知道这条记录的来路，直至最终到最初的所有者。

## 03 交易流程

### 流程定义

    一枚电子货币是一串数字签名：每一位所有者通过对前一次交易和所有的公钥通过哈希算法生成数字签名，并将这个数字签名附加在这枚电子货币的末尾（一串数字签名的末尾），电子货币就发送给了下一位所有者。而收款人通过对签名进行检验，就能够验证该链条的所有者。

![image](https://raw.githubusercontent.com/shepherddog/LearningNote/master/PIC/bitcoin_transactions.png)



### 如上图所示有几个关键概念

公钥和私钥

    公钥（public key)和私钥(private)是[不对称加密算法](https://baike.baidu.com/item/%E4%B8%8D%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/212019)中用于加密和解密的一对“钥匙”，因为使用了不同的“钥匙”加密和解密，因此叫做不对称加密算法。 加密明文：使用公钥加密。解密明文：只能使用私钥解密。

哈希（HASH)算法

    哈希（HASH）指的一种计算机算法，将一段数据通过散列算法，变换为固定长度的输出。

数字签名

    数字签名，就是只有信息的发送者才能产生的别人无法伪造的一段数字串，这段数字串同时也是对信息的发送者发送信息真实性的一个有效证明。（这里就是比特币）

## 04 时间戳服务器

时间戳服务器是对区块形式的数据数据中打上时间戳，并将哈希值广播全网。每个时间戳都包括了前一个时间戳的哈希值,从而形成了链条。如下图所示：

![image](https://raw.githubusercontent.com/shepherddog/LearningNote/master/PIC/bitcoin_timestamp.png)

### 疑问？

比特币不是设计为去中心化，但是怎么又有中心化概念的时间戳服务器？

    比特币通过工作量证明机制实现一个分布式的时间戳服务器。

## 05 工作量证明